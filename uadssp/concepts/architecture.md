

# 技术架构

## DDoS攻击

拒绝服务攻击（英语：Denial of Service
Attack，缩写：DoS）亦称洪水攻击，是一种网络攻击手法，其目的在于使目标电脑的网络或系统资源耗尽，使服务暂时中断或停止，导致其对目标客户不可用。

分布式拒绝服务攻击（英语：Distributed Denial of Service
attack，缩写：DDoS），是黑客使用网络上两个或以上被攻陷的电脑作为“僵尸”向特定的目标发动拒绝服务攻击。

## 高防原理

高防服务是针对互联网服务器（包括非UCloud云主机）在遭受大流量的DDoS攻击后导致服务不可用的情况，推出的一款增值防护服务。该服务可为客户提供3-4层DDoS的防护能力，包括SYN Flood、ACK Flood、UDP Flood、ICMP Flood等。

![](/images/uadssp/concepts/高防架构.png)

正常的时候用户直接访问源站。

客户通过配置高防服务后，把业务切入到高防（有域名的业务，把域名解析到高防的IP或CNAME；无域名的业务，把业务IP换成高防IP），之后所有公网流量都会先到高防机房，高防机房会将攻击流量进行清洗过滤，并将正常流量转发给源站IP，从而确保源站提供稳定正常的服务。

> 用户指访问客户业务的使用者
>
> 客户指购买高防的使用者

## 云资源联动

抗D服务包支持设置DDos高防和云资源间的联动，在发生DDos攻击导致联动EIP被封堵时，自动激活并切换到DDos高防。保证无DDoS攻击时业务流畅运行，发生DDoS攻击时可自动切换至DDoS高防，为您的业务提供防护。

### 防护规则

在将业务接入**普通防护规则**进行防护时，您只需完成域名接入（适合网站类业务）或端口接入（适合非网站类业务）即可，无需使用EIP联动防护。最多支持绑定10个源站IP。

业务正常接入DDoS高防后，所有业务流量（包括正常访问和发生攻击）都经过DDoS高防转发，其中攻击流量被清洗，只有正常访问流量被转发到源站服务器。在业务正常访问期间，由于正常业务流量也都经过DDoS高防转发，会给业务带来少量延迟。

![](/images/uadssp/concepts/cname高防.png)

针对业务正常访问期间的延迟问题，您可以使用**EIP联动防护规则**，实现正常业务访问期间流量不经过高防转发，直接达到源站服务器，不增加延迟；仅在业务被攻击时切换到高防进行流量转发，帮助业务清洗DDoS攻击。最多支持绑定30个联动IP。

![](/images/uadssp/concepts/cname联动.png)

### EIP联动防护规则

![](/images/uadssp/concepts/cname切换.png)

- **防护前**

  在防护规则未激活时，业务是直连到联动EIP的，此时可以[手动激活](/uantiddos/uadssp/opintro/manuanl_activate_rule.md)，也可以自动激活（自动激活规则见下表）。激活成功后业务自动接入DDos高防。

    | 切换规则 | 描述                                |
    | ------- | ---------------------------------- |
    | 单IP封堵 | 只要有一个联动EIP发生封堵，即触发自动激活 |
    | 全IP封堵 | 当所有联动EIP都封堵后，即触发自动激活    |

- **防护中**

  当业务处于DDos防护中时，可以通过**切换cname**在高防IP和联动EIP之间互相切换。如果已经切到联动EIP，发生上述的自动激活时，也会切到高防IP。

- **防护过期**

  防护规则在7天后过期，此时如果开启了**连续防护**，且还有**剩余防护次数**的情况下，会自动接续防护。否则DDos防护将会失效，cname切回联动EIP。
